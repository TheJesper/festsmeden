<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>FestSmeden</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>⚓</text></svg>">
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body { background: #0d1b2a; font-family: system-ui, -apple-system, sans-serif; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-8px); } to { opacity: 1; transform: translateY(0); } }
    #loading { color: #f0c040; text-align: center; margin-top: 100px; font-size: 18px; }
  </style>
  <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.9/babel.min.js"></script>
</head>
<body>
  <div id="root"><div id="loading">⚓ Laddar FestSmeden...</div></div>
  <script>
    // Wait for Babel to load, then fetch and execute app.jsx
    window.addEventListener('DOMContentLoaded', function() {
      fetch('/app.jsx')
        .then(function(r) { return r.text(); })
        .then(function(code) {
          // Add the render call to the code
          code += '\n\nReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));';
          // Transform and execute
          var transformed = Babel.transform(code, { presets: ['react'] }).code;
          var script = document.createElement('script');
          script.textContent = transformed;
          document.body.appendChild(script);
        })
        .catch(function(err) {
          document.getElementById('root').innerHTML = '<div style="color:red;margin:100px auto;text-align:center">Error loading app: ' + err.message + '</div>';
        });
    });
  </script>
</body>
</html>
